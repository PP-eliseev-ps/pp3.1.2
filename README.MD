<p><b>Условие:</b><br/> Склонируйте проект по <a href="https://github.com/VanderDT/Task-7" class="external-link" rel="nofollow noreferrer">ссылке</a> и просмотрите его.<br/> Модуль Spring Security позволяет нам внедрять права доступа, а также контролировать их исполнение без ручных проверок.<br/> Spring Security базируется на 2х интерфейсах, которые определяют связь сущностей с секьюрностью: UserDetails и GrantedAuthority.<br/> UserDetails - то, что будет интерпретироваться системой как пользователь.<br/> GrantedAuthority - сущность, описывающая права юзера.<br/> Оба эти интерфейса имеют множество реализаций: просмотрите класс WebSecurityConfig, в методе configure() с помощью настроек userDetailsService() мы собираем единственный на всю программу экземпляр UserDetails }}с именем и паролем user , а его роль "USER" так же будет преобразована в экземпляр {{GrantedAuthority.</p> <p>Это простейший способ создания секьюрности. Так же мы можем использовать jdbc-аутентификацию путем написания запроса, возвращающего пользователя и роль.<br/> Как вы понимаете, такие способы максимально просты, но лишены достаточной гибкости, потому наиболее часто используемый вариант настройки выглядит как имплементация{{ UserDetails}}и {{GrantedAuthority}} в классах-сущностях с переопределением существующих методов.</p> <p>Рассмотрим приложение.<br/> Новые классы:<br/> <ins><b>WebSecurityConfig</b></ins> - настройка секьюрности по определенным URL, а также настройка UserDetails и GrantedAuthority.<br/> <ins><b>LoginSuccessHandler</b></ins> -  хэндлер, содержащий в себе алгоритм действий при успешной аутентификации. Например, тут мы можем отправить пользователя с ролью админа на админку после логина, а с ролью юзер на главную страницу сайта и т.п. </p> <p><b>Задание:</b></p> <ol> <li>Перенесите классы и зависимости из предыдущей задачи.</li> <li>Создайте класс Role и свяжите User с ролями так, чтобы юзер мог иметь несколько ролей.</li> <li>Имплементируйте модели Role и User }}интерфейсами {{GrantedAuthority и UserDetails }}}}соответственно. Измените настройку секьюрности с{{ inMemory на userDetailService.</li> <li>Все CRUD-операции и страницы для них должны быть доступны только пользователю с ролью admin по url: /admin/.</li> <li>Пользователь с ролью user должен иметь доступ только к своей домашней странице /user, где выводятся его данные. Доступ к этой странице должен быть только у пользователей с ролью user и admin. Не забывайте про несколько ролей у пользователя!</li> <li>Настройте logout с любой страницы с использованием возможностей thymeleaf.</li> <li>Настройте LoginSuccessHandler }}так, чтобы админа после аутентификации направляло на страницу{{ /admin, а юзера на его страницу /user.</li> <li>Необходимо установить Postman/Insomnia (на выбор) и разобраться как он работает</li> <li>С помощью Postman/Insomnia протестировать все endpoints.</li> </ol>